<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jolen - Filipino Marble Game</title>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Poppins:wght@400;600;800&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="css/core.css">
  <link rel="stylesheet" href="css/overlays.css">
  <link rel="stylesheet" href="css/hud.css">
</head>

<body>
  <!-- Audio Elements -->
  <audio id="bgMusic" loop>
    <source src="../assets/jolen_assets/jolen_bg_music.mp3" type="audio/mpeg" />
  </audio>
  <audio id="clickSound">
    <source src="../assets/game_sfx/button_click_sound.mp3" type="audio/mpeg" />
  </audio>
  <audio id="hitSound">
    <source src="../assets/jolen_assets/jolen_hit_impact.mp3" type="audio/mpeg" />
  </audio>
  <audio id="factsMusic" loop>
    <source src="../assets/game_facts_assets/fact_cards_music.mp3" type="audio/mpeg" />
  </audio>

  <!-- Sound Controls -->
  <div class="sound-controls">
    <div class="volume-control">
      <span class="volume-label">üéµ BGM</span>
      <input type="range" id="bgmVolume" class="volume-slider" min="0" max="100" value="50" />
    </div>
    <div class="volume-control">
      <span class="volume-label">üîä SFX</span>
      <input type="range" id="sfxVolume" class="volume-slider" min="0" max="100" value="70" />
    </div>
  </div>

  <div class="app-container">
    <!-- Mode/Difficulty Overlay (Unified) -->
    <div id="menuOverlay" class="screen-panel overlay">
      <div class="panel-content overlay-content">
        <button id="closeOverlayBtn" class="close-btn" title="Close">
          √ó
        </button>

        <div class="header-area">
          <h1>JOLEN</h1>
          <p class="subtitle">Classic Filipino Marble Game</p>
        </div>

        <div class="menu-grid">
          <!-- Left: How to Play -->
          <div class="instructions-panel">
            <h3>How to Play</h3>
            <div class="tutorial-step">
              <div class="step-icon">üëÜ</div>
              <div class="step-text">
                <h4>Click & Hold</h4>
                <p>Grab your marble</p>
              </div>
            </div>
            <div class="tutorial-step">
              <div class="step-icon">üèπ</div>
              <div class="step-text">
                <h4>Drag Back</h4>
                <p>Aim and power up</p>
              </div>
            </div>
            <div class="tutorial-step">
              <div class="step-icon">üöÄ</div>
              <div class="step-text">
                <h4>Release</h4>
                <p>Shoot the marble!</p>
              </div>
            </div>
          </div>

          <!-- Right: Mode Selection -->
          <div class="difficulty-panel">
            <h3>Select Mode</h3>
            <div class="mode-options">
              <button id="mode-target" class="game-card mode-btn">
                <span class="card-icon">üéØ</span> Target
              </button>
              <button id="mode-circle" class="game-card mode-btn">
                <span class="card-icon">‚≠ï</span> Circle
              </button>
              <button id="mode-hole" class="game-card mode-btn">
                <span class="card-icon">üï≥Ô∏è</span> Hole
              </button>
              <button id="mode-tumbang" class="game-card mode-btn">
                <span class="card-icon">ü•´</span> Tumbang
              </button>
              <button id="mode-line" class="game-card mode-btn">
                <span class="card-icon">üìè</span> Line
              </button>
            </div>

            <h3>Difficulty</h3>
            <div class="difficulty-options">
              <button id="diff-easy" class="diff-btn easy">
                <span class="diff-name">Easy</span>
                <span class="diff-desc">Big targets, slow pace</span>
              </button>
              <button id="diff-normal" class="diff-btn normal">
                <span class="diff-name">Normal</span>
                <span class="diff-desc">Standard rules & speed</span>
              </button>
              <button id="diff-hard" class="diff-btn hard">
                <span class="diff-name">Hard</span>
                <span class="diff-desc">Small targets, fast pace</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Game Container -->
    <div id="game-container" style="display: none">
      <!-- Game UI -->
      <div id="gameUI">
        <div class="stat-box">
          <span class="stat-label">LEVEL</span>
          <span id="level-display" class="stat-value">1</span>
        </div>
        <div class="stat-box">
          <span class="stat-label">SCORE</span>
          <span id="score-display" class="stat-value">0</span>
        </div>
        <div class="lives-display" id="livesDisplay">
          <img src="../assets/luksong_baka_assets/player-life.png" class="heart" id="heart1">
          <img src="../assets/luksong_baka_assets/player-life.png" class="heart" id="heart2">
          <img src="../assets/luksong_baka_assets/player-life.png" class="heart" id="heart3">
        </div>

        <button id="menuBtn" class="ui-icon-btn" title="Menu">
          <span style="font-size: 24px">‚öôÔ∏è</span>
        </button>
      </div>

      <!-- Canvas -->
      <div class="canvas-wrapper">
        <canvas id="gameCanvas"></canvas>

        <!-- Instruction Prompt -->
        <div id="instruction-prompt" class="instruction-prompt" style="display: none;">
          <span class="mouse-icon">üñ±Ô∏è</span>
          <span>Click and drag your marble to shoot!</span>
        </div>
      </div>

      <!-- Message Overlay -->
      <div id="messageOverlay" class="message-overlay hidden">
        <div id="messageText"></div>
      </div>

      <!-- Back Button -->
      <a href="../game_select.php" class="back-btn" title="Exit">
        <img src="../assets/startmenu/back_button.png" alt="Back" style="width: 150px" />
      </a>
    </div>
  </div>

  <!-- Facts Button (Above How to Play) -->
  <button id="factsBtn" class="info-fab facts-btn" title="Game Facts">
    <img src="../assets/game_facts_assets/fact_icon.png" alt="Facts" />
  </button>

  <!-- Help Button -->
  <button id="infoBtn" class="info-fab" title="How to Play">‚ùì</button>

  <!-- Facts Overlay -->
  <div id="factsOverlay" class="overlay hidden">
    <div class="overlay-content facts-content">
      <button id="closeFactsBtn" class="close-btn" title="Close">√ó</button>
      <img src="../assets/game_facts_assets/jolen_facts_title.png" class="facts-title" alt="Facts" />

      <div class="facts-container">
        <img id="factsBoard" src="../assets/game_facts_assets/jolen_facts_board_1.png" class="facts-board"
          alt="Fact Board" />
        <div class="facts-nav">
          <span class="dot active" data-index="1"></span>
          <span class="dot" data-index="2"></span>
          <span class="dot" data-index="3"></span>
        </div>
      </div>
      <p class="click-hint">Click board to read next page ‚û°Ô∏è</p>
    </div>
  </div>

  <script type="module" src="js/Main.js"></script>
</body>

</html>